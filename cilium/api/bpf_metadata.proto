syntax = "proto3";

option go_package = "github.com/cilium/proxy/go/cilium/api;cilium";

package cilium;

message BpfMetadata {
  // File system root for bpf. Defaults to "/sys/fs/bpf" if left empty.
  string bpf_root = 1;

  // 'true' if the filter is on ingress listener, 'false' for egress listener.
  bool is_ingress = 2;

  // Use of the original source address requires kernel datapath support which
  // may or may not be available. 'true' if original source address
  // functionality is availeble. Original source address use may still be
  // skipped in scenarios where it is knows to not work.
  bool may_use_original_source_address = 3;

  // Set source endpoint ID in socket mark instead of source security ID on
  // upstream connections. This is needed for L7 LB listeners. Only valid for
  // egress.
  bool egress_mark_source_endpoint_id = 4;

  // Source address to be used whenever the original source address is not used.
  // Either ipv4_source_address or ipv6_source_address depending on the address
  // family of the destination address. If left empty, and no Envoy Cluster Bind
  // Config is provided, the source address will be picked by the local IP stack.
  string ipv4_source_address = 5;
  string ipv6_source_address = 6;

  // proxy_id is passed to access log messages and allows relating access log messages to
  // listeners.
  uint32 proxy_id = 7;
}
